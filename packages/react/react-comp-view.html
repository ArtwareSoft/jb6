<!DOCTYPE html>
<html>
<head>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<script type="importmap">JB_IMPORT_MAP</script>

<style>
  html, body { height: 100%; margin: 0; padding: 0; }
</style>
</head>
  
<body>
  <div id="show" style="height: 100vh;"></div>

  <script type="module">
    import { dsls, coreUtils } from '@jb6/core'
    import '@jb6/core/misc/import-map-services.js'
    import '@jb6/react/codemirror-utils.js'
    import '@jb6/react/lib/tailwindcss.js'
    import '@jb6/react/jb-pick-box.js'

    const {
      react: { 'react-comp': {JbPickerStarter} }
    } = dsls

    import { reactUtils } from '@jb6/react'
    const { h, hh, loadLucid05 } = reactUtils
    loadLucid05()
    const urlParams = new URLSearchParams(window.location.search)

    const { importMapsInCli } = JB_IMPORT_MAP
    jb.coreRegistry.importMapsInCli = importMapsInCli

    const urlsToLoad = urlParams.get('urlsToLoad') || ''
    for (const file of urlsToLoad.split(',').filter(Boolean)) 
      await import(file)

    const cmpId = urlParams.get('cmpId') || 'showMe'
    const { reactCmp, props, ctx } = await reactUtils.wrapReactCompWithSampleData(cmpId)
    //const ctx = new coreUtils.Ctx().setVars({react: reactUtils})
    reactUtils.createRoot(document.getElementById('show')).render(
      h('div', {}, 
      hh(ctx, JbPickerStarter), 
      hh(ctx, reactCmp, props))
    )

  </script>
</body>
</html>